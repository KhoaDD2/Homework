package com.mobisec.fortnitepayload;

import android.content.Context;
import android.content.res.Resources;
import android.util.Log;

import java.lang.reflect.Field;

//class Payload {
//    private static final String TAG="MOBISEC";
//    public static void run(){
//        Log.d(TAG,"Hello from payload");
//        ClassLoader c = getContextClassLoader();
//    }
//
//    public static void run(Payload a){
//        Log.d(TAG,"Hello from payload 2");
//    }
//
//    public static void run(Context c){
//        Log.d(TAG,"Hello from payload 3");
//    }
//
//}

class Payload {
    private static final String TAG="MOBISEC";
    public static void run() {
        Log.d(TAG,"Hello from payload 4");
        Thread t = Thread.currentThread();
        ClassLoader c = t.getContextClassLoader();
//        t.setContextClassLoader(c);

        Log.d(TAG,"Class = " + c.getClass());
        Log.d(TAG,"Parent = " + c.getParent());
        try {

            Class<?> a = c.loadClass("com.mobisec.fortnite.MainActivity");
            Field fld = a.getDeclaredField("flag");
//            Field[] flds = a.getDeclaredFields();
////            Log.d(TAG,"flds : " + flds);
//            for(Field fld : flds){
//                Log.d(TAG,"fld : " + fld.getName());
//            }
            Log.d(TAG,"name " + a.getName());
            Log.d(TAG,"class " + a.getClasses());
            if(fld!=null){
                Log.d(TAG,"Set access");
                fld.setAccessible(true);
                Object value = fld.get(a);
                Log.d(TAG,"f : " + value);
            } else {
                Log.e(TAG,"fld " + fld);
            }
//            Field[] fields = a.getFields();

//            Field f = a.getField("flag");
//            for( Field f : fields){
////                Log.d(TAG,"f = " + f.getName());
//                if (f.getName() == "flag"){
//

//                }
//            }
        } catch (Exception e){
            Log.e(TAG,"e" + e);
        };
    }

}
